<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quick Upload</title>
  <style>
    body { font-family: -apple-system, system-ui, Segoe UI, Roboto, Arial, sans-serif; max-width: 720px; margin: 40px auto; padding: 0 16px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 18px; }
    label { display:block; font-weight:600; margin: 12px 0 6px; }
    input[type=file] { width: 100%; }
    button { margin-top: 14px; padding: 10px 14px; border: 0; border-radius: 10px; background:#0b5fff; color:white; font-weight:700; cursor:pointer; }
    pre { background:#f6f8fa; padding:12px; border-radius:10px; overflow:auto; }
    .muted { color:#666; font-size: 13px; }
  </style>
</head>
<body>
  <h1>Quick Upload</h1>
  <div class="card">
    <p class="muted">Anyone with this link can upload. Files are stored temporarily in the QuoteCyber database for retrieval.</p>
    <form id="f">
      <label>Choose file</label>
      <input name="file" type="file" required />
      <button type="submit">Upload</button>
    </form>
    <div id="out"></div>
  </div>

<script>
const form = document.getElementById('f');
const out = document.getElementById('out');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  out.innerHTML = '<p>Uploadingâ€¦</p>';

  const fd = new FormData(form);
  const res = await fetch('/api/upload', { method: 'POST', body: fd });
  const text = await res.text();
  try {
    const j = JSON.parse(text);
    if (!res.ok) throw new Error(j.error || 'Upload failed');
    out.innerHTML = `
      <h3>Uploaded</h3>
      <p><b>Download link:</b> <a href="${j.downloadUrl}" target="_blank">${j.downloadUrl}</a></p>
      <pre>${JSON.stringify(j, null, 2)}</pre>
    `;
  } catch (err) {
    out.innerHTML = `<p style="color:#b00020"><b>Error:</b> ${text}</p>`;
  }
});
</script>
</body>
</html>
